bmcgehee/tcirust:
  ############################################################
  # The Distelli Manifest Reference
  #    distelli-manifest.yml
  #
  # Read more about Distelli Manifests at:
  #  http://www.distelli.com/docs/distelli-manifest-reference
  #
  # The first line must be your:
  # distelli username (not email)
  # application name
  #
  # as shown above:
  # USERNAME/APPLICATIONNAME:
  #
  ############################################################

  PreRelease:
    - curl -sSf https://static.rust-lang.org/rustup.sh | sh
    - cargo build --verbose
    - cargo test --verbose

  CommitData:
    - RepoType: Git 
    - RepoPath: .

  Env:
    ##########################################################
    # The Env: Section is where you define 
    #  your environment variables
    # One variable REPO_TYPE has been defined above
    #
    # Read more about Distelli Environment Variables at:
    #  https://www.distelli.com/docs/distelli-variables-reference
    # 
    # You may need to define others. for example:
    #- JAVA_HOME: /path/to/java/home/jre
    #- CATALINA_HOME: /path/to/tomcat
    #- PORT: 8080
    #
    ##########################################################

  PkgInclude:
    - '*'
    ##########################################################
    # The PkgInclude: Section is where you define
    #  the files and directories in your application
    #  that should be bundled for pushs and deploys
    #
    # The '*' will pick up all files and directories
    #
    ##########################################################

  PreInstall:
    - echo "Begin PreInstall"
    ##########################################################
    # The PreInstall: Section occurs before Install
    # 
    # This section is great for download or installing
    #  prerequisites.
    #
    # For example you may want to install mysql on ubuntu
    #- sudo apt-get -y install mysql-server
    #
    # Install PHP and Nginx
    #- sudo apt-get -y install php5-fpm
    #- sudo apt-get -y install nginx
    #
    # Enable IIS features on Windows
    #- dism /enable-feature /online /featurename:IIS-WebServer /all
    #
    # Download prerequisites on Windows
    #- powershell -Command (new-object System.Net.WebClient).DownloadFile('http://windows.php.net/downloads/releases/archives/php-5.6.8-Win32-VC11-x64.zip','php.zip')
    #
    ##########################################################

  PostInstall:
    - echo "Begin PostInstall"
    ##########################################################
    # The PostInstall: Section occurs after Install
    #
    # During the Install Distelli downloads and decompresses
    #  the application. Which includes files indicated by
    #  the PkgInclude: section.
    # Now that the files are available you can interact
    #  with them.
    #
    # Uncompress a tar package
    #- tar -xzvf example.tar.gz --strip 1 -C /var/www
    #
    # Open Firewall Rules on Windows
    #- netsh advfirewall firewall add rule name="TCP Port %PORT%" dir=in action=allow protocol=TCP localport=%PORT%
    #- netsh advfirewall firewall add rule name="TCP Port %PORT%" dir=out action=allow protocol=TCP localport=%PORT%
    #
    # Symlink files to your webserver
    #- sudo ln -sf $DISTELLI_APPHOME/webapp/ /usr/share/nginx/html/
    #
    ##########################################################

  Exec:
    - echo "Begin Exec"
    ##########################################################
    # The Exec: Section executes the application
    # 
    # The Distelli Agent watches this process and ensures 
    #  that if it stops, it is restarted.
    #
    # Start a simple PHP Web Server
    #- 'php -S 0.0.0.0:$PORT simpleapp.php'
    #
    # Start a windows application
    #- webserver.exe
    #
    # Start a python applicaoitn
    #- python simpleapp.py -p $PORT
    #
    # You may want to use the distelli-manifest.yml 
    #  Start: section instead of Exec: if you are starting a
    #  daemon or service.
    #
    ##########################################################
